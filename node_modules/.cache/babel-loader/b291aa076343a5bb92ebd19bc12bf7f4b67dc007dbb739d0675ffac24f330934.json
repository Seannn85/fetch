{"ast":null,"code":"var _jsxFileName = \"/Users/goktugkoyun/Desktop/Projects/fetch/src/components/editor/ExplanationList.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { createPortal } from 'react-dom';\nimport ExplanationPanel from './ExplanationPopup';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ExplanationList(_ref) {\n  _s();\n  let {\n    editorRef,\n    selections,\n    onExplanationClose\n  } = _ref;\n  const [widgets, setWidgets] = useState([]);\n  useEffect(() => {\n    const updateWidgets = widgets => {\n      widgets.filter(w => !selections.find(s => s.line === w.line)).forEach(w => {\n        editorRef.current.removeContentWidget(w);\n      });\n      const updatedWidgets = selections.map(explanation => {\n        const existingWidget = widgets.find(w => w.line === explanation.line);\n        if (existingWidget) {\n          return existingWidget;\n        }\n        const widget = buildWidget(explanation, editorRef);\n        editorRef.current.addContentWidget(widget);\n        return widget;\n      });\n      return updatedWidgets.filter(w => selections.find(s => s.line === w.line));\n    };\n    setWidgets(updateWidgets);\n  }, [selections, editorRef]);\n  const renderedZones = widgets.map(widget => {\n    if (widget.domNode && widget.domNode.nodeType === 1) {\n      return /*#__PURE__*/createPortal( /*#__PURE__*/_jsxDEV(ExplanationPanel, {\n        selection: widget,\n        onClose: onExplanationClose\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this), widget.domNode);\n    }\n    return null;\n  });\n  return renderedZones;\n}\n_s(ExplanationList, \"xR/xeBgu75B4310S8tsmAeb9Yf0=\");\n_c = ExplanationList;\nfunction buildWidget(selection) {\n  return {\n    ...selection,\n    domNode: null,\n    getId: function () {\n      return `explanation-${selection.line}`;\n    },\n    getDomNode: function () {\n      if (!this.domNode) {\n        this.domNode = document.createElement('div');\n        this.domNode.classList.add('z-50');\n      }\n      return this.domNode;\n    },\n    getPosition: function () {\n      return {\n        position: {\n          lineNumber: selection.line,\n          column: 0\n        },\n        preference: [2]\n      };\n    }\n  };\n}\nexport default ExplanationList;\nvar _c;\n$RefreshReg$(_c, \"ExplanationList\");","map":{"version":3,"names":["useState","useEffect","createPortal","ExplanationPanel","ExplanationList","editorRef","selections","onExplanationClose","widgets","setWidgets","updateWidgets","filter","w","find","s","line","forEach","current","removeContentWidget","updatedWidgets","map","explanation","existingWidget","widget","buildWidget","addContentWidget","renderedZones","domNode","nodeType","selection","getId","getDomNode","document","createElement","classList","add","getPosition","position","lineNumber","column","preference"],"sources":["/Users/goktugkoyun/Desktop/Projects/fetch/src/components/editor/ExplanationList.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { createPortal } from 'react-dom';\nimport ExplanationPanel from './ExplanationPopup';\n\nfunction ExplanationList({ editorRef, selections, onExplanationClose }) {\n  const [widgets, setWidgets] = useState([]);\n\n  useEffect(() => {\n    const updateWidgets = (widgets) => {\n      widgets\n        .filter((w) => !selections.find((s) => s.line === w.line))\n        .forEach((w) => {\n          editorRef.current.removeContentWidget(w);\n        });\n\n      const updatedWidgets = selections.map((explanation) => {\n        const existingWidget = widgets.find((w) => w.line === explanation.line);\n        if (existingWidget) {\n          return existingWidget;\n        }\n        const widget = buildWidget(explanation, editorRef);\n        editorRef.current.addContentWidget(widget);\n        return widget;\n      });\n\n      return updatedWidgets.filter((w) =>\n        selections.find((s) => s.line === w.line)\n      );\n    };\n    setWidgets(updateWidgets);\n  }, [selections, editorRef]);\n\n  const renderedZones = widgets.map((widget) => {\n    if (widget.domNode && widget.domNode.nodeType === 1) {\n      return createPortal(\n        <ExplanationPanel selection={widget} onClose={onExplanationClose} />,\n        widget.domNode\n      );\n    }\n    return null;\n  });\n\n  return renderedZones;\n}\n\nfunction buildWidget(selection) {\n  return {\n    ...selection,\n    domNode: null,\n    getId: function () {\n      return `explanation-${selection.line}`;\n    },\n    getDomNode: function () {\n      if (!this.domNode) {\n        this.domNode = document.createElement('div');\n        this.domNode.classList.add('z-50');\n      }\n      return this.domNode;\n    },\n    getPosition: function () {\n      return {\n        position: {\n          lineNumber: selection.line,\n          column: 0,\n        },\n        preference: [2],\n      };\n    },\n  };\n}\n\nexport default ExplanationList;\n"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,YAAY,QAAQ,WAAW;AACxC,OAAOC,gBAAgB,MAAM,oBAAoB;AAAC;AAElD,SAASC,eAAe,OAAgD;EAAA;EAAA,IAA/C;IAAEC,SAAS;IAAEC,UAAU;IAAEC;EAAmB,CAAC;EACpE,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EAE1CC,SAAS,CAAC,MAAM;IACd,MAAMS,aAAa,GAAIF,OAAO,IAAK;MACjCA,OAAO,CACJG,MAAM,CAAEC,CAAC,IAAK,CAACN,UAAU,CAACO,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAACC,IAAI,KAAKH,CAAC,CAACG,IAAI,CAAC,CAAC,CACzDC,OAAO,CAAEJ,CAAC,IAAK;QACdP,SAAS,CAACY,OAAO,CAACC,mBAAmB,CAACN,CAAC,CAAC;MAC1C,CAAC,CAAC;MAEJ,MAAMO,cAAc,GAAGb,UAAU,CAACc,GAAG,CAAEC,WAAW,IAAK;QACrD,MAAMC,cAAc,GAAGd,OAAO,CAACK,IAAI,CAAED,CAAC,IAAKA,CAAC,CAACG,IAAI,KAAKM,WAAW,CAACN,IAAI,CAAC;QACvE,IAAIO,cAAc,EAAE;UAClB,OAAOA,cAAc;QACvB;QACA,MAAMC,MAAM,GAAGC,WAAW,CAACH,WAAW,EAAEhB,SAAS,CAAC;QAClDA,SAAS,CAACY,OAAO,CAACQ,gBAAgB,CAACF,MAAM,CAAC;QAC1C,OAAOA,MAAM;MACf,CAAC,CAAC;MAEF,OAAOJ,cAAc,CAACR,MAAM,CAAEC,CAAC,IAC7BN,UAAU,CAACO,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAACC,IAAI,KAAKH,CAAC,CAACG,IAAI,CAAC,CAC1C;IACH,CAAC;IACDN,UAAU,CAACC,aAAa,CAAC;EAC3B,CAAC,EAAE,CAACJ,UAAU,EAAED,SAAS,CAAC,CAAC;EAE3B,MAAMqB,aAAa,GAAGlB,OAAO,CAACY,GAAG,CAAEG,MAAM,IAAK;IAC5C,IAAIA,MAAM,CAACI,OAAO,IAAIJ,MAAM,CAACI,OAAO,CAACC,QAAQ,KAAK,CAAC,EAAE;MACnD,oBAAO1B,YAAY,eACjB,QAAC,gBAAgB;QAAC,SAAS,EAAEqB,MAAO;QAAC,OAAO,EAAEhB;MAAmB;QAAA;QAAA;QAAA;MAAA,QAAG,EACpEgB,MAAM,CAACI,OAAO,CACf;IACH;IACA,OAAO,IAAI;EACb,CAAC,CAAC;EAEF,OAAOD,aAAa;AACtB;AAAC,GAvCQtB,eAAe;AAAA,KAAfA,eAAe;AAyCxB,SAASoB,WAAW,CAACK,SAAS,EAAE;EAC9B,OAAO;IACL,GAAGA,SAAS;IACZF,OAAO,EAAE,IAAI;IACbG,KAAK,EAAE,YAAY;MACjB,OAAQ,eAAcD,SAAS,CAACd,IAAK,EAAC;IACxC,CAAC;IACDgB,UAAU,EAAE,YAAY;MACtB,IAAI,CAAC,IAAI,CAACJ,OAAO,EAAE;QACjB,IAAI,CAACA,OAAO,GAAGK,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;QAC5C,IAAI,CAACN,OAAO,CAACO,SAAS,CAACC,GAAG,CAAC,MAAM,CAAC;MACpC;MACA,OAAO,IAAI,CAACR,OAAO;IACrB,CAAC;IACDS,WAAW,EAAE,YAAY;MACvB,OAAO;QACLC,QAAQ,EAAE;UACRC,UAAU,EAAET,SAAS,CAACd,IAAI;UAC1BwB,MAAM,EAAE;QACV,CAAC;QACDC,UAAU,EAAE,CAAC,CAAC;MAChB,CAAC;IACH;EACF,CAAC;AACH;AAEA,eAAepC,eAAe;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}